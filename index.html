<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./css/main.css" />
  <script src="https://npm.elemecdn.com/penndu@1.0.0/bsz.js"></script> <!--卜算子统计-->
  <title>一中南街1号回忆录</title>
</head>

<body>
  <div id="app">加载中</div>
  <script>
    window.$docsify = {
      el: '#app',
      coverpage: true,
      loadSidebar: true,
      name: '一中南街1号回忆录',
      sidebarDisplayLevel: 0,
      pagination: {
        previousText: '上一部分',
        nextText: '下一部分',
        crossChapter: true,
        crossChapterText: false,
      },
      plugins: [
        function (hook) {
          var footer = [
            '<hr/>',
            '<div id="twikoocomment">评论区</div>',
            '<div id="tcomment" style="width:400px"></div>',
            '<hr/>',
            '<footer>',
            '<span>网站由<a href="https://www.springing.top">Spring</a>强力驱动</span>',
            '<br>',
            '<span>往事总在回忆时被赋予意义 —— 2024年新高考一卷</span>',
            '</footer>'
          ].join('');

          hook.afterEach(function (html) {
            return html + footer;
          });

          // 初始化 Twikoo
          function initTwikoo() {
            console.log('初始化 Twikoo 评论区');
            twikoo.init({
              envId: 'https://twikoo.happyking.top',
              el: '#tcomment',
            });
          }

          // 页面加载时初始化评论区
          hook.ready(initTwikoo);

          // 页面切换时重新渲染评论区
          hook.afterEach(function (html) {
            setTimeout(() => {
              const commentElement = document.getElementById('tcomment');
              if (commentElement) {
                commentElement.innerHTML = ''; // 清空评论区
                initTwikoo(); // 重新初始化 Twikoo
              }
            }, 0); // 0 毫秒延迟
          });
        }
      ],
    };
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  <script src="//unpkg.com/docsify-pagination/dist/docsify-pagination.min.js"></script> <!--底部章节跳转-->
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.39/dist/twikoo.all.min.js"></script>

  
</body>

</html>